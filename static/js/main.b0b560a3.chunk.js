(this.webpackJsonptodomvc=this.webpackJsonptodomvc||[]).push([[0],{93:function(e,t,n){"use strict";n.r(t),n.d(t,"yDoc",(function(){return xe})),n.d(t,"rtc",(function(){return ge}));var r={};n.r(r),n.d(r,"addTodo",(function(){return N})),n.d(r,"deleteTodo",(function(){return D})),n.d(r,"editTodo",(function(){return k})),n.d(r,"completeTodo",(function(){return A})),n.d(r,"completeAllTodos",(function(){return _})),n.d(r,"clearCompleted",(function(){return I})),n.d(r,"setVisibilityFilter",(function(){return L}));var o,c=n(11),i=n(49),a=n(33),s=n(29),d=n(0),u=n(1),l=n(7),f=n(6),p=n(42),b=n.n(p),h=n(12),j=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={text:e.props.text||""},e.handleSubmit=function(t){var n=t.target.value.trim();13===t.which&&(e.props.onSave(n),e.props.newTodo&&e.setState({text:""}))},e.handleChange=function(t){e.setState({text:t.target.value})},e.handleBlur=function(t){e.props.newTodo||e.props.onSave(t.target.value)},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsx)("input",{className:b()({edit:this.props.editing,"new-todo":this.props.newTodo}),type:"text",placeholder:this.props.placeholder,autoFocus:!0,value:this.state.text,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleSubmit})}}]),n}(c.Component),O=n(15),m={position:"absolute",padding:"0.5rem 1rem",transform:"translateX(calc(-100% - 1rem))",background:"#fff",boxShadow:"0 3px 6px rgba(0, 0, 0, 0.1)",borderRadius:"3px",fontWeight:500},v=function(){var e=Object(c.useState)(ge.connected),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(h.jsx)("button",{style:m,onClick:function(){n?ge.disconnect():ge.connect(),r(!n)},children:n?"Disable Sync":"Enable Sync"})},x=function(e){var t=e.addTodo;return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)("h1",{children:"todos"}),Object(h.jsxs)("small",{style:{position:"absolute",top:"-40px",width:"100%",textAlign:"center"},children:["based on"," ",Object(h.jsx)("a",{href:"https://github.com/reduxjs/redux/tree/master/examples/todomvc",children:"https://github.com/reduxjs/redux/tree/master/examples/todomvc"})]}),Object(h.jsx)(v,{}),Object(h.jsx)(j,{newTodo:!0,onSave:function(e){0!==e.length&&t(e)},placeholder:"What needs to be done?"})]})},g="ADD_TODO",y="DELETE_TODO",w="EDIT_TODO",C="COMPLETE_TODO",S="COMPLETE_ALL_TODOS",T="CLEAR_COMPLETED",E="SET_VISIBILITY_FILTER",N=function(e){return{type:g,text:e}},D=function(e){return{type:y,id:e}},k=function(e,t){return{type:w,id:e,text:t}},A=function(e){return{type:C,id:e}},_=function(){return{type:S}},I=function(){return{type:T}},L=function(e){return{type:E,filter:e}},F=Object(s.b)(null,{addTodo:N})(x),M=n(10),R=function(e){var t=e.active,n=e.children,r=e.setFilter;return Object(h.jsx)("a",{className:b()({selected:t}),style:{cursor:"pointer"},onClick:function(){return r()},children:n})},U=Object(s.b)((function(e,t){return{active:t.filter===e.visibilityFilter}}),(function(e,t){return{setFilter:function(){e(L(t.filter))}}}))(R),B="show_all",Y="show_completed",J="show_active",G=(o={},Object(M.a)(o,B,"All"),Object(M.a)(o,J,"Active"),Object(M.a)(o,Y,"Completed"),o),P=function(e){var t=e.activeCount,n=e.completedCount,r=e.onClearCompleted,o=1===t?"item":"items";return Object(h.jsxs)("footer",{className:"footer",children:[Object(h.jsxs)("span",{className:"todo-count",children:[Object(h.jsx)("strong",{children:t||"No"})," ",o," left"]}),Object(h.jsx)("ul",{className:"filters",children:Object.keys(G).map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(U,{filter:e,children:G[e]})},e)}))}),!!n&&Object(h.jsx)("button",{className:"clear-completed",onClick:r,children:"Clear completed"})]})},H=n(24),V=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={editing:!1},e.handleDoubleClick=function(){e.setState({editing:!0})},e.handleSave=function(t,n){0===n.length?e.props.deleteTodo(t):e.props.editTodo(t,n),e.setState({editing:!1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.todo,o=n.completeTodo,c=n.deleteTodo;return e=this.state.editing?Object(h.jsx)(j,{text:r.text,editing:this.state.editing,onSave:function(e){return t.handleSave(r.id,e)}}):Object(h.jsxs)("div",{className:"view",children:[Object(h.jsx)("input",{className:"toggle",type:"checkbox",checked:r.completed,onChange:function(){return o(r.id)}}),Object(h.jsx)("label",{onDoubleClick:this.handleDoubleClick,children:r.text}),Object(h.jsx)("button",{className:"destroy",onClick:function(){return c(r.id)}})]}),Object(h.jsx)("li",{className:b()({completed:r.completed,editing:this.state.editing}),children:e})}}]),n}(c.Component),W=function(e){var t=e.filteredTodos,n=e.actions;return Object(h.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(h.jsx)(V,Object(H.a)({todo:e},n),e.id)}))})},K=n(54),X=function(e){return e.todos},q=Object(K.a)([function(e){return e.visibilityFilter},X],(function(e,t){switch(e){case B:return t;case Y:return t.filter((function(e){return e.completed}));case J:return t.filter((function(e){return!e.completed}));default:throw new Error("Unknown filter: "+e)}})),z=Object(K.a)([X],(function(e){return e.reduce((function(e,t){return t.completed?e+1:e}),0)})),Q=Object(s.b)((function(e){return{filteredTodos:q(e)}}),(function(e){return{actions:Object(a.a)(r,e)}}))(W),Z=function(e){var t=e.todosCount,n=e.completedCount,r=e.actions;return Object(h.jsxs)("section",{className:"main",children:[!!t&&Object(h.jsxs)("span",{children:[Object(h.jsx)("input",{className:"toggle-all",type:"checkbox",checked:n===t,readOnly:!0}),Object(h.jsx)("label",{onClick:r.completeAllTodos})]}),Object(h.jsx)(Q,{}),!!t&&Object(h.jsx)(P,{completedCount:n,activeCount:t-n,onClearCompleted:r.clearCompleted})]})},$=Object(s.b)((function(e){return{todosCount:e.todos.length,completedCount:z(e)}}),(function(e){return{actions:Object(a.a)(r,e)}}))(Z),ee=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(F,{}),Object(h.jsx)($,{})]})},te=n(19),ne=[{text:"Use Redux",completed:!1,id:0}];var re,oe,ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;return t.type===E?t.filter:e},ie=n(27),ae=n(61),se=function(e){return"[object Object]"===Object.prototype.toString.call(e)},de=function(e){return Array.isArray(e)},ue=function(e){return"string"==typeof e||e instanceof String},le=function(e){return Number.isInteger(e)},fe=function e(t){if(de(t)){var n=new ie.a,r=t.map((function(t){return e(t)}));return n.push(r),n}if(se(t)){var o=new ie.b;return Object.entries(t).forEach((function(t){o.set(t[0],e(t[1]))})),o}return t};(oe=re||(re={})).Add="add",oe.Update="update",oe.Delete="delete";var pe=function e(t,n,r,o){if(0===r.length)throw new Error("Cannot traverse 0 length path.");if(1===r.length)!function(e,t,n,r){if(t===re.Add||t===re.Update){var o=fe(r);if(e instanceof ie.a&&le(n))t===re.Update&&e.delete(n),e.insert(n,[o]);else{if(!(e instanceof ie.b&&ue(n)))throw new Error("Unsupported YAbstractType or property type did not match.");e.set(n,o)}}else if(t===re.Delete)if(e instanceof ie.a&&le(n)){var c=(a=e.length-1,(i=n)<0?0:i>a?a:i);e.delete(c)}else{if(!(e instanceof ie.b&&ue(n)))throw new Error("Unsupported YAbstractType or property type did not match.");e.delete(n)}var i,a}(t,n,r[0],o);else{var c=r[0],i=r.slice(1);if(t instanceof ie.a){if(!le(c))throw new Error("States diverged.");var a=t.get(c);if(!(a instanceof ie.b||a instanceof ie.a))throw new Error("States diverged.");e(a,n,i,o)}else if(t instanceof ie.b){if(!ue(c))throw new Error("States diverged.");var s=t.get(c);if(!(s instanceof ie.b||s instanceof ie.a))throw new Error("States diverged.");e(s,n,i,o)}else console.warn("Encountered unsupported yType. Received:",t)}},be=function(e,t,n,r){Object(ae.getDiff)(n,r).forEach((function(n){var r=n.val;pe(e,n.op,[t].concat(n.path||[]),r)}))},he=Object(a.b)({todos:function(e){return function(t,n){return"YJS_INCOMING_CHANGES"===(null==n?void 0:n.type)?void 0===n.payload?t:n.payload:e(t,n)}}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return[].concat(Object(te.a)(e),[{id:e.reduce((function(e,t){return Math.max(t.id,e)}),-1)+1,completed:!1,text:t.text}]);case y:return e.filter((function(e){return e.id!==t.id}));case w:return e.map((function(e){return e.id===t.id?Object(H.a)(Object(H.a)({},e),{},{text:t.text}):e}));case C:return e.map((function(e){return e.id===t.id?Object(H.a)(Object(H.a)({},e),{},{completed:!e.completed}):e}));case S:var n=e.every((function(e){return e.completed}));return e.map((function(e){return Object(H.a)(Object(H.a)({},e),{},{completed:!n})}));case T:return e.filter((function(e){return!1===e.completed}));default:return e}})),visibilityFilter:ce}),je=he,Oe=(n(78),n(34)),me=n(64),ve=function(){function e(t){Object(d.a)(this,e),this.connected=!1,this.yDoc=t,"false"!==window.localStorage.getItem("rtcSyncEnabled")&&this.connect()}return Object(u.a)(e,[{key:"connect",value:function(){this.provider?this.provider.connect():this.provider=new me.a("your-room-name",this.yDoc,{signaling:["ws://localhost:4444"]}),window.localStorage.setItem("rtcSyncEnabled","true"),this.connected=!0}},{key:"disconnect",value:function(){this.provider&&this.provider.disconnect(),window.localStorage.setItem("rtcSyncEnabled","false"),this.connected=!1}}]),e}(),xe=new Oe.a,ge=new ve(xe),ye=Object(a.c)(je);!function(e,t,n){var r=e.getMap("__ReduxYjsBindingsRootMap"),o=t.getState()[n];se(o)&&Object(ie.c)(e,(function(){r.set(n,fe({})),be(r,n,{},o)})),de(o)&&Object(ie.c)(e,(function(){r.set(n,fe([])),be(r,n,[],o)}));var c=!1,i=!1,a=t.getState()[n];t.subscribe((function(){var o=a;a=t.getState()[n],i||(c=!0,Object(ie.c)(e,(function(){be(r,n,o,a)})),c=!1)})),r.observeDeep((function(){c||(i=!0,function(e,t,n){e.dispatch({type:"YJS_INCOMING_CHANGES",payload:t.toJSON()[n]})}(t,r,n),i=!1)}))}(xe,ye,"todos"),Object(i.render)(Object(h.jsx)(s.a,{store:ye,children:Object(h.jsx)(ee,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.b0b560a3.chunk.js.map